import React from "react";
import {
    Box,
    Button,
    Checkbox,
    Grid,
    Table, TableBody,
    TableCell,
    TableContainer,
    TableHead,
    TableRow,
    Typography
} from "@mui/material";
import {IconFileCode} from '@tabler/icons-react';
import {Editor} from "@monaco-editor/react";

export const DisplayVulnerabilityRes = () => {

    const files = [{fileName: "123.c", finish: true, vulnerability: false},
        {fileName: "4566.c", finish: true, vulnerability: true, pos: "4,2"},
        {fileName: "45667.c", finish: true, vulnerability: true, pos: "11"},
        {fileName: "8899.c", finish: true, vulnerability: true, pos: "49"}]

    return (
        <>
            <Grid container direction="column" spacing={2}>
                <Grid item xs={12} container alignItems="center">
                    <Grid item>
                        <Button>
                            上传文件
                        </Button>
                        <Button>
                            漏洞检测
                        </Button>
                    </Grid>
                </Grid>
                <Grid item xs={12} container>
                    <Grid container item xs={12}>
                        <Grid item>
                            只能上传c/c++文件,最多只能上传10个文件
                        </Grid>
                        <Grid item>
                            {files.map(({fileName, finish}, index) => {
                                return (<>
                                    <Box display={"flex"} key={index}>
                                        <Box>
                                            <IconFileCode/>
                                            <Typography>
                                                {fileName}
                                            </Typography>
                                        </Box>
                                        <Checkbox value={finish}/>
                                    </Box>
                                </>)
                            })}
                        </Grid>
                    </Grid>
                </Grid>
                <Grid item xs={12} container>
                    <Grid item xs={6}>
                        <Editor height="90vh" defaultLanguage="c++" defaultValue="// some comment"/>
                    </Grid>
                    <Grid item xs={6}>
                        <TableContainer>
                            <Table>
                                <TableHead>
                                    <TableRow>
                                        <TableCell>文件名</TableCell>
                                        <TableCell>是否有漏洞</TableCell>
                                        <TableCell>漏洞行位置</TableCell>
                                    </TableRow>
                                </TableHead>
                                <TableBody>
                                    {files.map((row, index) => (
                                        <TableRow
                                            key={row.fileName + index}
                                            sx={{'&:last-child td, &:last-child th': {border: 0}}}
                                        >
                                            <TableCell component="th" scope="row">
                                                {row.fileName}
                                            </TableCell>
                                            <TableCell align="right">{row.vulnerability ? "是" : "否"}</TableCell>
                                            <TableCell align="right">{row.pos}</TableCell>
                                        </TableRow>
                                    ))}
                                </TableBody>
                            </Table>
                        </TableContainer>
                    </Grid>
                </Grid>

            </Grid>
        </>
    )
}